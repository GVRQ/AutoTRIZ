
# AutoTRIZ Agent

**TRIZ для задач в AI/мультиагентных системах** — это агент на LangGraph, который пошагово применяет методологию **ТРИЗ** к инженерной проблеме по схеме **T→C→I→S**:  
**T**ask (формулировка задачи) → **C**ontradiction (выявление противоречия) → **I**nventive Principles (подбор изобретательских приемов) → **S**olution (синтез решения).  
Агент помогает быстро перейти от «сырого» описания проблемы к структурному решению с пояснениями и ссылкой на используемые приемы.

> Научная база: «**AutoTRIZ: Automating Engineering Innovation with TRIZ and LLMs**» (arXiv:2403.13002) — https://arxiv.org/abs/2403.13002

---

## Зачем

- **Систематизировать решение** задач в разработке AI-/мультиагентных систем через проверенную методологию ТРИЗ.  
- **Ускорить идеацию**: выявить противоречие, подобрать релевантные приемы и собрать реалистичную концепцию решения.  
- **Объяснимость**: агент возвращает **структурированный отчет**, где видно, **какой прием** и **почему** применяется.

---

## Как это работает (коротко)

Агент — это граф из узлов LangGraph:

1. **T / Problem Definition** — уточняет формулировку задачи.  
2. **C / Contradiction** — находит ключевое противоречие (напр., *скорость* vs *качество*).  
3. **I / Principles** — подбирает **3–5** подходящих изобретательских принципов (комбинирует детерминированные правила + LLM).  
4. **S / Solution** — синтезирует концепцию решения и объясняет, как каждый принцип снимает конфликт.  
5. (**Опционально**) **Оценка решения** (поиск аналогов, проверка новизны) и **фидбек-петля** с `interrupt/resume` — позволяет быстро доработать.

---

## Пример использования

**Вход:**  
> «Мы хотим ускорить отклик мультиагентной системы, не снижая качество решений.»

**Агент вернет:**

- **Проблема (T):** чёткая формулировка, цели и ограничения.  
- **Противоречие (C):** *скорость* vs *качество*, *простота* vs *функциональность* и т. п.  
- **Принципы (I):** например «**Дробление/Сегментация**», «**Локальное качество**», «**Посредник**», «**Предварительное действие**» — с пояснениями.  
- **Решение (S):** концепция (архитектурные приёмы, изменения в оркестрации, кэширование, деградация моделей, SLA-стратегии), привязка каждого шага к выбранным принципам.  
- **Отчет:** Markdown c блоками 1–7 (задача, проблема, противоречия, принципы, решение, контекстный анализ, фидбек).

---

## Структура узлов (детальнее)

- **`problem_definition`** — уточняет цель, KPI, ограничения (данные, задержка, качество/метрики).  
- **`identify_contradictions`** — выносит главный конфликт в форме `X vs Y`.  
- **`apply_inventive_principles`** — гибридная логика:  
  - попытка сопоставления типовым парам из «мини-матрицы»,  
  - при необходимости — запрос к LLM с подсказкой по 40 классическим принципам.  
- **`generate_solution_concept`** — собирает предложение с явными связками «принцип → действие → эффект».  
- **`check_solution_quality` (опц.)** — поиск похожих решений, оценка новизны/реализуемости/рисков, рекомендации.  
- **`get_feedback` (опц.)** — прерывание (`interrupt`), парсинг отзыва и `Command(goto=...)` для точечной доработки.

---

## Конфигурация

| Параметр | Назначение | Пример |
|---|---|---|
| `provider` | провайдер LLM | `openai` / `gigachat` |
| `model` | модель чата | `gpt-4o(-mini)`, `GigaChat-2-Max` |
| `need_interrupt` | включить фидбек-петлю | `True/False` |
| `skip_search` | пропустить поиск аналогов | `True/False` |
| `thread_id` | обязательный `MemorySaver` идентификатор | `"demo-run-1"` |
| `checkpoint_ns` | namespace для чекпоинтов | `"triz-demo"` |

**Переменные окружения**:  
`OPENAI_API_KEY` или `GIGACHAT_API_KEY`, `TAVILY_API_KEY` (опционально), `GIGACHAT_BASE_URL` (если требуется кастомный endpoint).

---

## Советы по запуску

- **LangGraph v1+**: используйте `context_schema` (а не `config_schema`), иначе получите предупреждение о депрекации.  
- **MemorySaver**: передавайте `thread_id` (и при желании `checkpoint_ns`) в `config["configurable"]`.  
- **GigaChat + SSL**: в сетях с self-signed сертификатами передайте `verify_ssl_certs=False` в клиент — иначе возможны `CERTIFICATE_VERIFY_FAILED`.  
- **Нет доступа к онлайновому поиску?** Ставьте `skip_search=True`.  
- **Кол-во токенов**: ограничивайте объем выдачи поиска, чтобы не «распухал» prompt.

---

## FAQ

**Q:** Можно ли строго привязать выбор принципов к матрице Альтшуллера 39×39?  
**A:** Да. Текущая версия использует «мини-матрицу» + LLM. При желании можно подгрузить **полную матрицу** и 40 принципов (описания) и выполнять подбор **детерминированно** (RAG).

**Q:** Можно ли применять агент к «не инженерным» задачам?  
**A:** Да — ТРИЗ прекрасно переносится на продуктовые, организационные и архитектурные противоречия. Важно четко формулировать `T` и `C`.

**Q:** Как встроить в свой проект?  
**A:** Вынесите узлы как функции и подключите их к своему `StateGraph`, либо используйте наш Colab/модуль как библиотечный компонент.

---

## Полезные ссылки

- **AutoTRIZ (arXiv)**: https://arxiv.org/abs/2403.13002

---

## Лицензия и вклад

Используйте агент, расширяйте мини-матрицу под свои кейсы, присылайте PR/Issues.  

---

### TL;DR

**AutoTRIZ Agent** — практичный способ включить **ТРИЗ** в ваш инженерный пайплайн ИИ/мультиагентов: быстро, структурно и объяснимо.  
Запускается в Colab/локально, поддерживает OpenAI/GigaChat, fedback-петлю и контроль качества идей.
